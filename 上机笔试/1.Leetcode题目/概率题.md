# 概率题

1. 一个木桶中装着M个白色的小球；小明每分钟从桶中随机的取出一个球，将其涂上红色并将球放回桶中；请问小明将所有球均涂上红色的期望时间是几分钟。（注：取出的球无论是什么颜色，小明都会再次给它涂上红色）

解：

```
定义M个随机变量：
X1:从袋子里没有红球，到袋子里有一个红球所需要的时间 ~ 几何分布，p = 1
X2:从袋子里有1个红球，到袋子里有2个红球所需要的时间 ~ 几何分布，p = M-1/M
...
XM:从袋子里有M-1个红球，到袋子里有M个红球所需要的时间 ~ 几何分布，p = 1/M

期望时间 X = X1+X2+...XM, 故E(X) = E(X1)+E(X2)+...+E(XM) = 1+ M/M-1 +...M
```

2. 你有一把宝剑。每使用一个宝石，有50%的概率会成功让宝剑升一级，50%的概率会失败。如果宝剑的级数大于等于5的话，那么失败会使得宝剑降1级。如果宝剑的级数小于5的话，失败没有效果。问题是：期望用多少个宝石可以让一把1级的宝剑升到9级？

解：

```
用a[i]表示从第i-1级升到第i级期望使用的宝石数量。
当i<=5时，因为不会降级，则期望的数量均为2，即a[2] = a[3] = a[4] = a[5] = 2
当i>5时，因为会降级，成功时一个宝石就够了，不成功时需要倒退一级，需要先使用a[i-1]个宝石先回到i-1级，再使用a[i]个宝石升到第i级，即

a[i] = 1 * 1/2 + (1 + a[i-1] + a[i]) * 1/2

即 a[i] = a[i-1] + 2

可知，a[6]= 4, a[7] = 6, a[8] = 8, a[9] = 10

则1级到9级需要的宝石数为 a[2]+…+a[9] = 36。
```

3. 随机发生器问题

（1） 已知一随机发生器，产生0的概率是p，产生1的概率是1-p，现在要你构造一个发生器，使得它产生0和1的概率均为1/2。

解：产生01和10的概率是一样的都是p(1-p)，那么可以用拒绝采样

（2）已知一随机发生器，产生的数字的分布不清楚，现在要你构造一个发生器，使得它产生0和1的概率均为1/2。

解：随机发生器随机生成两个数，a和b，那么a<b和a>b的概率是一样的。

（3）已知一随机发生器，产生0的概率是p，产生1的概率是1-p，构造一个发生器，使得它构造1、2、3的概率均为1/3；…。更一般地，构造一个发生器，使得它构造1、2、3、…n的概率均为1/n。

解：上面已经说过，可以等概率的产生0/1了，那么便可以用这个直接生成二进制。（一生二，二生三，三生万物）

4.  一个桶里面有白球、黑球各100个，现在按下述规则取球： i 、每次从桶里面拿出来两个球； ii、如果取出的是两个同色的球，就再放入一个黑球； iii、如果取出的是两个异色的求，就再放入一个白球。 问：最后桶里面只剩下一个黑球的概率是多少？

解：

```
- 每次操作，桶中都减少一个球
- 桶中白球的个数都是成对存在的，也就是为偶数。

所以，当桶中剩下三个球的时候分为以下几种情况
白白黑
黑黑黑
最后的结果都是只剩下一个黑球。
```

5. 10个人出去玩，集合时间有10分钟，每个人都在该时间内到达，概率均匀分布，彼此独立，那么最后一个人最有可能到达的时间是?

解：

最后一个人在第n分钟到达的概率为$\frac{1}{10} * \frac{n}{10}^{9}$, 故最可能时间为10. 

6. 100个人排队，每个人只能看到自己之前的人的帽子的颜色（假设只有黑白两色），每个人都得猜自己帽子的颜色，只能说一次，说错就死掉，别人可以听到之前的人的答案以及是否死掉。请问用什么策略说死掉的人最少。

```
最后一位的人可以透露出与全局相关的一些信息。比如，他可以数一数他前面99个人一共有多少顶白帽子，并约定他猜“黑”表示他前面共有偶数顶白帽，他猜“白”表示他前面共有奇数顶白帽。坐倒数第二的那个人也数一数他前面98个人的白帽子个数：如果他数出来的个数与先前透露出的个数一奇一偶，则他自己肯定戴的是白帽子；如果他数出来的和先前透露的结果奇偶性相同，则他自己戴的肯定是黑帽子。这样，坐倒数第二的保证可以猜对了。那接下来咋办呢？不要忘了，其他囚犯能听到刚才那人猜的是什么，并且知道他的猜测保证是对的。这相当于每个人不仅能看到坐他前面的所有人的帽子颜色，还知道他背后那些人的帽子颜色，结合最初的那个奇偶性信息，接下来的每一个人都可以猜出自己脑袋上的帽子颜色。这样下去，至少99个囚犯可以保证被释放。
```

7.  扑克牌问题

   (1). 54张牌，平均分成三堆，大小王在同一堆的概率？-> 17/53

   (2). 从一副52张扑克牌中随机抽两张，颜色相等的概率? -> $\frac{C_{26}^2}{C_{52}^2}$

   (3). 52张牌去掉大小王，分成26*2两堆，从其中一堆取4张牌为4个a的概率? -> 分两堆，四张a出现在一堆的概率为$\frac{2 \times C_{48}^{22}}{C_{52}^{26}}$; 现在，我们要选择四张a出现的那一堆，所以目前的概率是$\frac{C_{48}^{22}}{C_{52}^{26}}$; 选四个排，正好选到四张a的概率：$\frac{C_{48}^{22}}{C_{52}^{26}} \times \frac{C_4^4}{C_{26}^4}$.

8.  买饮料，三个瓶盖可以换一瓶，想要解决100个人的喝水问题，最少需要买多少瓶？

解：把这100个人分成3组，每组33个人，还剩一个人。那么，先给剩下的着一个人买一瓶水，然后再买两瓶水，这样三瓶喝完还能再换一瓶，于是这一瓶作为启动的“引子”，剩下的33组只需要每组买2瓶就好了。总共需要33*2+1 = 67瓶。

9.  在一条高速公路上，在30分钟内看到一辆汽车的可能性是0.95，那么在10分钟内看到一辆车的概率是多少?（假设过车的概率是恒定的）
10. 100人坐飞机，第一个乘客在座位中随便选一个坐下，第100人正确坐到自己坐位的概率是？

```
**等价**于这个描述：2-99号乘客登机后如果发现1号(疯子)坐在本属于自己的位子上，就会请疯子离开，然后疯子再随机找个空座。这样到100号登机时，2-99号都在自己座位上，1号疯子在自己座位上和100号乘客座位上概率相同，所以是1/2。另外这个结果和总乘客数无关，可以由100推广至任意k
```

11. 某城市发生了一起汽车撞人逃跑事件，该城市只有两种颜色的车，蓝20%绿80%，事发时现场有一个目击者，他指证是蓝车，但是根据专家在现场分析，当时那种条件能看正确的可能性是80%，那么，肇事的车是蓝车的概率是多少

    解：50%. 总共有四种情况，在看正确（80%）的前提下，有两种，即蓝（20%） 就是蓝，绿（80%） 就是绿；在看错（20%）的情况下，也有两种，即蓝（20%）看成绿，或绿（80%）看成蓝。题目表示目击者指证蓝车，所以只有两种情况，即看正确了就是蓝车或者是看错了把绿车看成了蓝车，那肇事的车是蓝车的概率就是（80%\*20%）/（80%\*20%+20\*80%）=50%。

12. 1有8个箱子，现在有一封信，这封信放在这8个箱子中（任意一个）的概率为4/5,不放的概率为1/5

    现在我打开1号箱子发现是空的，**求下面7个箱子中含有这封信的概率为**？

    7/8

13. 